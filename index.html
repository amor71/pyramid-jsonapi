
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pyramid-jsonapi Documentation &#8212; pyramid_jsonapi 1.0.4.dev13 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.4.dev13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyramid_jsonapi package" href="apidoc/pyramid_jsonapi.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="pyramid-jsonapi-documentation">
<h1>pyramid-jsonapi Documentation<a class="headerlink" href="#pyramid-jsonapi-documentation" title="Permalink to this headline">¶</a></h1>
<p>Create a JSON-API (<a class="reference external" href="http://jsonapi.org/">http://jsonapi.org/</a>) standard API from a database using
the sqlAlchemy ORM and pyramid framework.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>There will be a version 2.0.0 release soon. This will introduce the
ability to construct API metadata, resulting in some default behaviour that
is not backwards compatible (largely in endpoint naming).</p>
<p>You can view, follow, check, or contribute to the upcoming version in the
<code class="docutils literal"><span class="pre">metadata</span></code> branch.</p>
<p>The backwards incompatible change is to move the api endpoints from
<code class="docutils literal"><span class="pre">/collection_name</span></code> to <code class="docutils literal"><span class="pre">/api/collection_name</span></code> to make room for a set of
endpoints under <code class="docutils literal"><span class="pre">/metadata</span></code>. To get the old behaviour back, put the
following in your ini file:</p>
<p><code class="docutils literal"><span class="pre">pyramid_jsonapi.route_pattern_api_prefix</span> <span class="pre">=</span></code></p>
<p class="last">(There really is nothing after the ‘=’.)</p>
</div>
<p>The core idea behind pyramid-jsonapi is to create a working JSON-API
automatically, starting from the sort of <code class="docutils literal"><span class="pre">models.py</span></code> file shipped with a
typical pyramid + sqlalchemy application.</p>
<p>If you are reading this document directly from the repository on github
(<a class="reference external" href="https://github.com/colinhiggs/pyramid-jsonapi">https://github.com/colinhiggs/pyramid-jsonapi</a>) you may notice some
oddities. In particular, internal links to things like <code class="docutils literal"><span class="pre">:py:func:`blah`</span></code> which
don’t work. That’s because those directives are designed to be consumed by
sphinx (<a class="reference external" href="http://www.sphinx-doc.org/">http://www.sphinx-doc.org/</a>). You can view the same document after
it has been run through sphinx, as well as the API documentation, at the
pyramid_jsonapi documentation page
(<a class="reference external" href="https://colinhiggs.github.io/pyramid-jsonapi/">https://colinhiggs.github.io/pyramid-jsonapi/</a>).</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Stable releases are now uploaded to pypi:
<a class="reference external" href="https://pypi.python.org/pypi?:action=display&amp;name=pyramid_jsonapi">https://pypi.python.org/pypi?:action=display&amp;name=pyramid_jsonapi</a>. You
can install it in the usual way:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install -i pyramid_jsonapi
</pre></div>
</div>
</li>
<li><p class="first">Test releases are sometimes uploaded to testpypi:
<a class="reference external" href="https://testpypi.python.org/pypi?:action=display&amp;name=pyramid_jsonapi">https://testpypi.python.org/pypi?:action=display&amp;name=pyramid_jsonapi</a>.
These may or may not be ahead of the current stable version. You
can install it (perhaps into a virtualenv for play purposes) with</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install -i https://testpypi.python.org/pypi pyramid_jsonapi
</pre></div>
</div>
</li>
<li><p class="first">Since there is only one file, you can download the development version from
<a class="reference external" href="https://github.com/colinhiggs/pyramid-jsonapi">https://github.com/colinhiggs/pyramid-jsonapi</a> and copy the
pyramid_jsonapi directory into your PYTHONPATH or into your project.</p>
</li>
</ul>
</div>
<div class="section" id="auto-creating-an-api">
<h2>Auto-Creating an API<a class="headerlink" href="#auto-creating-an-api" title="Permalink to this headline">¶</a></h2>
<p>Declare your models somewhere using sqlalchemy’s
<code class="xref py py-func docutils literal"><span class="pre">sqlalchemy.ext.declarative.declarative_base()</span></code>. In this documentation we
assume that you have done so in a file called <code class="docutils literal"><span class="pre">models.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;people&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">BigInteger</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">autoincrement</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>
    <span class="n">blogs</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Blog&#39;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s1">&#39;owner&#39;</span><span class="p">)</span>
    <span class="n">posts</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Post&#39;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s1">&#39;author&#39;</span><span class="p">)</span>

<span class="c1"># and the rest...</span>
</pre></div>
</div>
<p>If you are happy with the defaults, you can get away with the following
additions to the standard pyramid alchemy scaffold’s top level <code class="docutils literal"><span class="pre">__init__.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyramid_jsonapi</span>
<span class="c1"># Or &#39;from . import pyramid_jsonapi&#39; if you copied pyramid_jsonapi directly</span>
<span class="c1"># into your project.</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span> <span class="c1"># Your models module.</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>

  <span class="c1"># The usual stuff from the pyramid alchemy scaffold.</span>
  <span class="n">engine</span> <span class="o">=</span> <span class="n">engine_from_config</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;sqlalchemy.&#39;</span><span class="p">)</span>
  <span class="n">models</span><span class="o">.</span><span class="n">DBSession</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
  <span class="n">models</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">bind</span> <span class="o">=</span> <span class="n">engine</span>
  <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>

  <span class="c1"># pyramid_jsonapi uses the renderer labeled &#39;json&#39;. As usual, if you have</span>
  <span class="c1"># any types to serialise that the default JSON renderer can&#39;t handle, you</span>
  <span class="c1"># must alter it. For example:</span>
  <span class="n">renderer</span> <span class="o">=</span> <span class="n">JSON</span><span class="p">()</span>
  <span class="n">renderer</span><span class="o">.</span><span class="n">add_adapter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">datetime_adapter</span><span class="p">)</span>
  <span class="n">config</span><span class="o">.</span><span class="n">add_renderer</span><span class="p">(</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>

  <span class="c1"># Instantiate a PyramidJSONAPI class instance</span>
  <span class="c1"># The third argument should be a callable which accepts a</span>
  <span class="c1"># CollectionView instance as an argument and returns a database session.</span>
  <span class="c1"># Notably the request is available as view.request, so if you&#39;re doing</span>
  <span class="c1"># something like this post</span>
  <span class="c1"># https://metaclassical.com/what-the-zope-transaction-manager-means-to-me-and-you</span>
  <span class="c1"># you can return the per-request session. In this case we just return the</span>
  <span class="c1"># usual DBSession from the models module.</span>
  <span class="n">pj</span> <span class="o">=</span> <span class="n">pyramid_jsonapi</span><span class="o">.</span><span class="n">PyramidJSONAPI</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">models</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">view</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">DBSession</span><span class="p">)</span>

  <span class="c1"># Create the routes and views automagically:</span>
  <span class="n">pj</span><span class="o">.</span><span class="n">create_jsonapi_using_magic_and_pixie_dust</span><span class="p">()</span>

  <span class="c1"># Routes and views are added imperatively, so no need for a scan - unless</span>
  <span class="c1"># you have defined other routes and views declaratively.</span>

  <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</div>
<p>Yes, there really is a method called
<a class="reference internal" href="apidoc/pyramid_jsonapi.html#pyramid_jsonapi.PyramidJSONAPI.create_jsonapi_using_magic_and_pixie_dust" title="pyramid_jsonapi.PyramidJSONAPI.create_jsonapi_using_magic_and_pixie_dust"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.PyramidJSONAPI.create_jsonapi_using_magic_and_pixie_dust()</span></code></a>. No, you
don’t <em>have</em> to call it that. If you are feeling more sensible you can use the
synonym <a class="reference internal" href="apidoc/pyramid_jsonapi.html#pyramid_jsonapi.PyramidJSONAPI.create_jsonapi" title="pyramid_jsonapi.PyramidJSONAPI.create_jsonapi"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.PyramidJSONAPI.create_jsonapi()</span></code></a>.</p>
<div class="section" id="pyramid-jsonapi-pyramidjsonapi">
<h3><a class="reference internal" href="apidoc/pyramid_jsonapi.html#pyramid_jsonapi.PyramidJSONAPI" title="pyramid_jsonapi.PyramidJSONAPI"><code class="xref py py-class docutils literal"><span class="pre">pyramid_jsonapi.PyramidJSONAPI</span></code></a><a class="headerlink" href="#pyramid-jsonapi-pyramidjsonapi" title="Permalink to this headline">¶</a></h3>
<p>This is the class that encapsulates a whole API representing a set of models.
The constructor has three mandatory arguments.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">config</span></code> is the usual Configurator object used in pyramid.</li>
<li><code class="docutils literal"><span class="pre">models</span></code> can either be a module (as in the example above) defining classes
which inherit from <code class="xref py py-func docutils literal"><span class="pre">declarative_base()</span></code> or an iterable of such classes.</li>
<li><code class="docutils literal"><span class="pre">get_dbsession</span></code> (to which we passed the lambda function above) should be a
callable which accepts an instance of
<a class="reference internal" href="apidoc/pyramid_jsonapi.html#pyramid_jsonapi.CollectionViewBase" title="pyramid_jsonapi.CollectionViewBase"><code class="xref py py-class docutils literal"><span class="pre">pyramid_jsonapi.CollectionViewBase</span></code></a> and returns a
<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.orm.session.Session</span></code> (or an equivalent, like a
<code class="xref py py-func docutils literal"><span class="pre">sqlalchemy.orm.scoped_session()</span></code>)</li>
</ul>
<p>Once you have an instance of <code class="docutils literal"><span class="pre">PyramidJSONAPI</span></code> you instruct it to build
endpoints (routes and views) with the method
<code class="docutils literal"><span class="pre">create_jsonapi_using_magic_and_pixie_dust()</span></code> (or <code class="docutils literal"><span class="pre">create_jsonapi()</span></code>). This
is deliberately a two step affair to give you the chance to manipulate certain
things (like the list of available endpoints) before the endpoints are
constructed:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pj_api</span> <span class="o">=</span> <span class="n">pyramid_jsonapi</span><span class="o">.</span><span class="n">PyramidJSONAPI</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">models</span><span class="p">,</span> <span class="n">session_getter</span><span class="p">)</span>

<span class="c1"># Do something here like add an view for OPTIONS requests.</span>

<span class="n">pj_api</span><span class="o">.</span><span class="n">create_jsonapi_using_magic_and_pixie_dust</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="auto-create-assumptions">
<h3>Auto-Create Assumptions<a class="headerlink" href="#auto-create-assumptions" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Your model classes all inherit from a base class returned by sqlalchemy’s
<code class="docutils literal"><span class="pre">declarative-base()</span></code>.</li>
<li>Each model has a single primary_key column. This will be auto-detected and
copied to an attribute called <code class="docutils literal"><span class="pre">_jsonapi_id</span></code>, so…<ol class="arabic">
<li>…don’t create any columns called <code class="docutils literal"><span class="pre">_jsonapi_id</span></code> and</li>
<li>use a separate primary key for association objects rather than the
composite key defined by the left and right referenced foreign keys.</li>
</ol>
</li>
<li>You are happy to give your collection end-points the same name as the
corresponding database table (can be overridden).</li>
<li>You have defined any relationships to exposed via the API using
<code class="docutils literal"><span class="pre">sqlalchemy.orm.relationship()</span></code> (or <code class="docutils literal"><span class="pre">backref()</span></code>).</li>
<li>You are happy to expose any so defined relationship via a relationship URL.</li>
</ol>
<p>Some of those behaviours can be adjusted, see <a class="reference internal" href="#customising-the-generated-api">Customising the Generated API</a>.</p>
</div>
<div class="section" id="trying-your-api-out">
<h3>Trying Your API Out<a class="headerlink" href="#trying-your-api-out" title="Permalink to this headline">¶</a></h3>
<p>You should now have a working JSON-API. A quick test. The following assumes that
you have already created and set up a pyramid project in development mode
(<code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code> in pyramid 1.6, <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span></code> in pyramid 1.7).</p>
<p>Make sure you have activated your virtualenv:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">source</span> env/bin/activate
</pre></div>
</div>
<p>Start the server:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pserv your_project/development.ini
</pre></div>
</div>
<p>Assuming you have a colleciton named ‘people’ and using the rather lovely httpie
<a class="reference external" href="https://github.com/jkbrzt/httpie/">https://github.com/jkbrzt/httpie/</a> to test:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http http://localhost:6543/people

HTTP/1.1 <span class="m">200</span> OK
Content-Length: <span class="m">1387</span>
Content-Type: application/vnd.api+json<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>UTF-8
Date: Fri, <span class="m">28</span> Aug <span class="m">2015</span> <span class="m">20</span>:22:46 GMT
Server: waitress
</pre></div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;alice&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/people/1&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;&lt;some_single_relationship&gt;&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;rel_type&gt;&quot;</span><span class="p">,</span> <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;some_id&gt;&quot;</span><span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;&lt;another_person&gt;&quot;</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>See <code class="docutils literal"><span class="pre">test_project/test_project/__init__.py</span></code> for a fully working
<code class="docutils literal"><span class="pre">__init__.py</span></code> file.</p>
<p>You don’t need a <code class="docutils literal"><span class="pre">views.py</span></code> unless you have some other routes and views.</p>
</div>
</div>
<div class="section" id="customising-the-generated-api">
<h2>Customising the Generated API<a class="headerlink" href="#customising-the-generated-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="selectively-passing-models-for-api-generation">
<h3>Selectively Passing Models for API Generation<a class="headerlink" href="#selectively-passing-models-for-api-generation" title="Permalink to this headline">¶</a></h3>
<p>Your database may have some tables which you do not wish to expose as collections in the generated API. You can be selective by:</p>
<ul class="simple">
<li>writing a models module with only the model classes you wish to expose; or</li>
<li>passing an iterable of only the model classes you wish to expose to
<a class="reference internal" href="apidoc/pyramid_jsonapi.html#pyramid_jsonapi.PyramidJSONAPI" title="pyramid_jsonapi.PyramidJSONAPI"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.PyramidJSONAPI()</span></code></a>.</li>
</ul>
</div>
<div class="section" id="modifying-endpoints">
<h3>Modifying Endpoints<a class="headerlink" href="#modifying-endpoints" title="Permalink to this headline">¶</a></h3>
<p>Endpoints are created automatically from a dictionary: <code class="xref py py-data docutils literal"><span class="pre">pyramid_jsonapi.EndpointsData.endpoints</span></code>.</p>
<p>This takes the following format:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;route_pattern_suffix&#39;</span><span class="p">:</span> <span class="s1">&#39;{id}&#39;</span><span class="p">,</span>
    <span class="s1">&#39;http_methods&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;DELETE&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="s1">&#39;delete&#39;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="s1">&#39;GET&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="s1">&#39;PATCH&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="s1">&#39;patch&#39;</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="o">...</span> <span class="c1"># other endpoints ommitted</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>There are 4 <code class="docutils literal"><span class="pre">endpoints</span></code> defined: <code class="docutils literal"><span class="pre">collection</span></code>, <code class="docutils literal"><span class="pre">item</span></code>, <code class="docutils literal"><span class="pre">relationships</span></code> and <code class="docutils literal"><span class="pre">related</span></code>.</li>
<li>Each <code class="docutils literal"><span class="pre">endpoint</span></code> may have <code class="docutils literal"><span class="pre">route_pattern_suffix</span></code> defined (if ommitted, defaults to <code class="docutils literal"><span class="pre">''</span></code>).</li>
<li>Each <code class="docutils literal"><span class="pre">endpoint</span></code> may have 0 or more <code class="docutils literal"><span class="pre">http_methods</span></code> defined. (<code class="docutils literal"><span class="pre">GET</span></code>, <code class="docutils literal"><span class="pre">POST</span></code>, etc).</li>
<li>Each <code class="docutils literal"><span class="pre">method</span></code> must have <code class="docutils literal"><span class="pre">function</span></code> defined. This is the name (string) of the view function to call for this endpoint.</li>
<li>Each <code class="docutils literal"><span class="pre">method</span></code> may have a <code class="docutils literal"><span class="pre">renderer</span></code> defined (if omitted, this defaults to <code class="docutils literal"><span class="pre">'json'</span></code>).</li>
</ul>
<p>For example, to extend this structure to handle the <code class="docutils literal"><span class="pre">OPTIONS</span></code> <code class="docutils literal"><span class="pre">http_method</span></code> for all endpoints (e.g. for <a class="reference external" href="https://enable-cors.org">CORS</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">...</span>

<span class="c1"># Create a view class method.</span>
<span class="k">def</span> <span class="nf">options_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span>

<span class="c1"># Instantiate the class</span>
<span class="n">pj</span> <span class="o">=</span> <span class="n">pyramid_jsonapi</span><span class="o">.</span><span class="n">PyramidJSONAPI</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">models</span><span class="p">,</span> <span class="n">dbsession</span><span class="p">)</span>

<span class="c1"># Update all endpoints to handle OPTIONS http_method requests</span>
<span class="k">for</span> <span class="n">endpoint</span> <span class="ow">in</span> <span class="n">pj</span><span class="o">.</span><span class="n">EndpointData</span><span class="o">.</span><span class="n">endpoints</span><span class="p">:</span>
    <span class="n">pj</span><span class="o">.</span><span class="n">EndpointData</span><span class="o">.</span><span class="n">endpoints</span><span class="p">[</span><span class="n">endpoint</span><span class="p">][</span><span class="s1">&#39;http_methods&#39;</span><span class="p">][</span><span class="s1">&#39;OPTIONS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="s1">&#39;options_view&#39;</span><span class="p">,</span>
                                                                      <span class="s1">&#39;renderer&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>

<span class="c1"># Create the view_classes</span>
<span class="n">pj</span><span class="o">.</span><span class="n">create_jsonapi</span><span class="p">()</span>

<span class="c1"># Bind the custom options method (defined above) to each view_class</span>
<span class="k">for</span> <span class="n">vc</span> <span class="ow">in</span> <span class="n">pj</span><span class="o">.</span><span class="n">view_classes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">vc</span><span class="o">.</span><span class="n">options_view</span> <span class="o">=</span> <span class="n">options_view</span>
</pre></div>
</div>
</div>
<div class="section" id="search-filter-operators">
<h3>Search (Filter) Operators<a class="headerlink" href="#search-filter-operators" title="Permalink to this headline">¶</a></h3>
<p>Search filters are on collection get operations are specified with URL paramaters of the form filter[attribute:op]=value. A number of search/filter operators are supported out of the box. The list currently includes the following for all column types:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">eq</span></code></li>
<li><code class="docutils literal"><span class="pre">ne</span></code></li>
<li><code class="docutils literal"><span class="pre">startswith</span></code></li>
<li><code class="docutils literal"><span class="pre">endswith</span></code></li>
<li><code class="docutils literal"><span class="pre">contains</span></code></li>
<li><code class="docutils literal"><span class="pre">lt</span></code></li>
<li><code class="docutils literal"><span class="pre">gt</span></code></li>
<li><code class="docutils literal"><span class="pre">le</span></code></li>
<li><code class="docutils literal"><span class="pre">ge</span></code></li>
<li><code class="docutils literal"><span class="pre">like</span></code> or <code class="docutils literal"><span class="pre">ilike</span></code>. Note that both of these use ‘*’ in place of ‘%’ to
avoid much URL escaping.</li>
</ul>
<p>plus these for JSONB columns:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">contains</span></code></li>
<li><code class="docutils literal"><span class="pre">contained_by</span></code></li>
<li><code class="docutils literal"><span class="pre">has_all</span></code></li>
<li><code class="docutils literal"><span class="pre">has_any</span></code></li>
<li><code class="docutils literal"><span class="pre">has_key</span></code></li>
</ul>
<p>You can add support for new filters using the <code class="xref py py-attr docutils literal"><span class="pre">PyramidJSONAPI.filter_registry</span></code> (which is an instance of <code class="xref py py-class docutils literal"><span class="pre">FilterRegistry</span></code>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pj_api</span><span class="o">.</span><span class="n">filter_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;my_comparator&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above would register the sqlalchemy column comparator <code class="docutils literal"><span class="pre">my_comparator</span></code> (which should exist as a valid sqlalchemy comparator function) as valid for all column types and also create a URL filter op called <code class="docutils literal"><span class="pre">my_comparator</span></code>. Any instances of <code class="docutils literal"><span class="pre">__</span></code> (double underscore) are stripped from the comparator name to create the filter name, so if we had called the comparator <code class="docutils literal"><span class="pre">__my_comparator__</span></code> it would still become the filter operator <code class="docutils literal"><span class="pre">my_comparator</span></code>. For example, the sqlalachemy comparator <code class="docutils literal"><span class="pre">__eq__</span></code> is registered with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pj_api</span><span class="o">.</span><span class="n">filter_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;__eq__&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>But has a filter name of <code class="docutils literal"><span class="pre">eq</span></code>.</p>
<p>You can override the autogenerated name by providing one as an argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pj_api</span><span class="o">.</span><span class="n">filter_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;my_comparator&#39;</span><span class="p">,</span> <span class="n">filter_name</span><span class="o">=</span><span class="s1">&#39;my_filter&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The comparator/filter combination is valid for all column types by default, which is the same as specifying:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pj_api</span><span class="o">.</span><span class="n">filter_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;my_comparator&#39;</span><span class="p">,</span> <span class="n">column_type</span><span class="o">=</span><span class="s1">&#39;__ALL__&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Comparators can be registered as valid for individual column types by passing a column type:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">JSONB</span>
<span class="n">pj_api</span><span class="o">.</span><span class="n">filter_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;my_comparator&#39;</span><span class="p">,</span> <span class="n">column_type</span><span class="o">=</span><span class="n">JSONB</span><span class="p">)</span>
</pre></div>
</div>
<p>It’s also possible to specify a value transformation function to change the paramter value before it is passed to the comparator. For example the <code class="docutils literal"><span class="pre">like</span></code> filter swaps all ‘*’ characters for ‘%’ before calling the associated <code class="docutils literal"><span class="pre">like</span></code> comparator. It is registered like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pj_api</span><span class="o">.</span><span class="n">filter_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
  <span class="s1">&#39;like&#39;</span><span class="p">,</span>
  <span class="n">value_transform</span><span class="o">=</span><span class="k">lambda</span> <span class="n">val</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\*&#39;</span><span class="p">,</span> <span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="callbacks">
<h3>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this headline">¶</a></h3>
<p>At certain points during the processing of a request, <code class="docutils literal"><span class="pre">pyramid_jsonapi</span></code> will
invoke any callback functions which have been registered. Callback sequences are
currently implemented as <code class="docutils literal"><span class="pre">collections.deque</span></code>: you add your callback functions
using <code class="docutils literal"><span class="pre">.append()</span></code> or <code class="docutils literal"><span class="pre">.appendleft()</span></code>, remove them with <code class="docutils literal"><span class="pre">.pop()</span></code> or
<code class="docutils literal"><span class="pre">.popleft()</span></code> and so on. The functions in each callback list will be called in
order at the appropriate point.</p>
</div>
<div class="section" id="getting-the-callback-deque">
<h3>Getting the Callback Deque<a class="headerlink" href="#getting-the-callback-deque" title="Permalink to this headline">¶</a></h3>
<p>Every view class (subclass of CollectionViewBase) has its own dictionary of
callback deques (<code class="docutils literal"><span class="pre">view_class.callbacks</span></code>). That dictionary is keyed by callback
deque name. For example, if you have a view_class and you would like to append
your <code class="docutils literal"><span class="pre">my_after_get</span></code> function to the <code class="docutils literal"><span class="pre">after_get</span></code> deque:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">view_class</span><span class="o">.</span><span class="n">callbacks</span><span class="p">[</span><span class="s1">&#39;after_get&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">my_after_get</span><span class="p">)</span>
</pre></div>
</div>
<p>If you don’t currently have a view class, you can get one from a model class
(for example, <code class="docutils literal"><span class="pre">models.Person</span></code>) with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">person_view_class</span> <span class="o">=</span> <span class="n">pyramid_jsonapi</span><span class="o">.</span><span class="n">PyramidJSONAPI</span><span class="o">.</span><span class="n">view_classes</span><span class="p">[</span><span class="n">models</span><span class="o">.</span><span class="n">Person</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="available-callback-deques">
<h3>Available Callback Deques<a class="headerlink" href="#available-callback-deques" title="Permalink to this headline">¶</a></h3>
<p>The following is a list of available callbacks. Note that each item in the list
has a name like <code class="docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.&lt;callback_name&gt;</span></code>. That’s so
that sphinx will link to auto-built documentation from the module
<code class="docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc</span></code>. In practice you should use only the name
after the last ‘.’ to get callback deques.</p>
<ul class="simple">
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.after_serialise_object" title="pyramid_jsonapi.callbacks_doc.after_serialise_object"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.after_serialise_object()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.after_serialise_identifier" title="pyramid_jsonapi.callbacks_doc.after_serialise_identifier"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.after_serialise_identifier()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.after_get" title="pyramid_jsonapi.callbacks_doc.after_get"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.after_get()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.before_patch" title="pyramid_jsonapi.callbacks_doc.before_patch"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.before_patch()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.before_delete" title="pyramid_jsonapi.callbacks_doc.before_delete"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.before_delete()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.after_collection_get" title="pyramid_jsonapi.callbacks_doc.after_collection_get"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.after_collection_get()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.before_collection_post" title="pyramid_jsonapi.callbacks_doc.before_collection_post"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.before_collection_post()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.after_related_get" title="pyramid_jsonapi.callbacks_doc.after_related_get"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.after_related_get()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.after_relationships_get" title="pyramid_jsonapi.callbacks_doc.after_relationships_get"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.after_relationships_get()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.before_relationships_post" title="pyramid_jsonapi.callbacks_doc.before_relationships_post"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.before_relationships_post()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.before_relationships_patch" title="pyramid_jsonapi.callbacks_doc.before_relationships_patch"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.before_relationships_patch()</span></code></a></li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.callbacks_doc.html#pyramid_jsonapi.callbacks_doc.before_relationships_delete" title="pyramid_jsonapi.callbacks_doc.before_relationships_delete"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.callbacks_doc.before_relationships_delete()</span></code></a></li>
</ul>
</div>
<div class="section" id="canned-callbacks">
<h3>Canned Callbacks<a class="headerlink" href="#canned-callbacks" title="Permalink to this headline">¶</a></h3>
<p>Using the callbacks above, you could, in theory, do things like implement a
permissions system, generalised call-outs to other data sources, or many other
things. However, some of those would entail quite a lot of work as well as being
potentially generally useful. In the interests of reuse, pyramid_jsonapi
maintains sets of self consistent callbacks which cooperate towards one goal.</p>
<p>So far there is only one such set: <code class="docutils literal"><span class="pre">access_control_serialised_objects</span></code>. This
set of callbacks implements an access control system based on the inspection of
serialised (as dictionaries) objects before POST, PATCH and DELETE operations
and after serialisation and GET operations.</p>
</div>
<div class="section" id="registering-canned-callbacks">
<h3>Registering Canned Callbacks<a class="headerlink" href="#registering-canned-callbacks" title="Permalink to this headline">¶</a></h3>
<p>Given a callback set name, you can register callback sets on each view class:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">view_class</span><span class="o">.</span><span class="n">append_callback_set</span><span class="p">(</span><span class="s1">&#39;access_control_serialised_objects&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or on all view classes:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pyramid_jsonapi</span><span class="o">.</span><span class="n">PyramidJSONAPI</span><span class="o">.</span><span class="n">append_callback_set_to_all_views</span><span class="p">(</span>
  <span class="s1">&#39;access_control_serialised_objects&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="callback-sets">
<h3>Callback Sets<a class="headerlink" href="#callback-sets" title="Permalink to this headline">¶</a></h3>
<div class="section" id="access-control-serialised-objects">
<h4><code class="docutils literal"><span class="pre">access_control_serialised_objects</span></code><a class="headerlink" href="#access-control-serialised-objects" title="Permalink to this headline">¶</a></h4>
<p>These callbacks will allow, deny, or manipulate the results of actions
dependent upon the return values of two methods of the calling view class:
<a class="reference internal" href="apidoc/pyramid_jsonapi.html#pyramid_jsonapi.CollectionViewBase.allowed_object" title="pyramid_jsonapi.CollectionViewBase.allowed_object"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.CollectionViewBase.allowed_object()</span></code></a> and
<a class="reference internal" href="apidoc/pyramid_jsonapi.html#pyramid_jsonapi.CollectionViewBase.allowed_fields" title="pyramid_jsonapi.CollectionViewBase.allowed_fields"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.CollectionViewBase.allowed_fields()</span></code></a>.</p>
<p>The default implementations allow everything. To do anything else, you need to
replace those methods with your own implementations.</p>
<ul class="simple">
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.html#pyramid_jsonapi.CollectionViewBase.allowed_object" title="pyramid_jsonapi.CollectionViewBase.allowed_object"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.CollectionViewBase.allowed_object()</span></code></a> will be given two
arguments: an instance of a view class, and the serialised object (so far). It
should return <code class="docutils literal"><span class="pre">True</span></code> if the operation (available from view.request) is
allowed on the object, or <code class="docutils literal"><span class="pre">False</span></code> if not.</li>
<li><a class="reference internal" href="apidoc/pyramid_jsonapi.html#pyramid_jsonapi.CollectionViewBase.allowed_fields" title="pyramid_jsonapi.CollectionViewBase.allowed_fields"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.CollectionViewBase.allowed_fields()</span></code></a> will be given one
argument: an instance of a view class. It should return the set of fields
(attributes and relationships) on which the current operation is allowed.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="consuming-the-api-from-the-client-end">
<h2>Consuming the API from the Client End<a class="headerlink" href="#consuming-the-api-from-the-client-end" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-ing-resources">
<h3>GET-ing Resources<a class="headerlink" href="#get-ing-resources" title="Permalink to this headline">¶</a></h3>
<div class="section" id="a-collection">
<h4>A Collection<a class="headerlink" href="#a-collection" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts
</pre></div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;something insightful&quot;</span><span class="p">,</span>
        <span class="nt">&quot;published_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-01-01T00:00:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: alice.main&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;people&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/author&quot;</span><span class="p">,</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/author&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
            <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;blog&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blogs&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/blog&quot;</span><span class="p">,</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/blog&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
            <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;comments&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[],</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/comments&quot;</span><span class="p">,</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/comments&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;ONETOMANY&quot;</span><span class="p">,</span>
            <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
              <span class="nt">&quot;returned&quot;</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;... 5 more results ...&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;first&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?sort=id&amp;page%5Boffset%5D=0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;last&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?sort=id&amp;page%5Boffset%5D=0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
      <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nt">&quot;offset&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;returned&quot;</span><span class="p">:</span> <span class="mi">6</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that we have:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">data</span></code> which is an array of comments objects, each with:<ul>
<li><code class="docutils literal"><span class="pre">attributes</span></code>, as expected<ul>
<li>a <code class="docutils literal"><span class="pre">links</span></code> object with:</li>
<li>a <code class="docutils literal"><span class="pre">self</span></code> link</li>
</ul>
</li>
<li>relationship objects for each relationship with:<ul>
<li><code class="docutils literal"><span class="pre">data</span></code> with resource identifiers for related objects</li>
<li><code class="docutils literal"><span class="pre">self</span></code> and <code class="docutils literal"><span class="pre">related</span></code> links</li>
<li>some other information about the relationship in <code class="docutils literal"><span class="pre">meta</span></code></li>
</ul>
</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">links</span></code> with:<ul>
<li><code class="docutils literal"><span class="pre">self</span></code> and</li>
<li><code class="docutils literal"><span class="pre">pagination</span></code> links</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">meta</span></code> with:<ul>
<li>some extra information about the number of results returned.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="a-single-resource">
<h4>A Single Resource<a class="headerlink" href="#a-single-resource" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts/1
</pre></div>
</div>
<p>Returns a single resource object in <code class="docutils literal"><span class="pre">data</span></code> and no pagination links.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;something insightful&quot;</span><span class="p">,</span>
      <span class="nt">&quot;published_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-01-01T00:00:00&quot;</span><span class="p">,</span>
      <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: alice.main&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;people&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/author&quot;</span><span class="p">,</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/author&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
          <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;blog&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blogs&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/blog&quot;</span><span class="p">,</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/blog&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
          <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;comments&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/comments&quot;</span><span class="p">,</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/comments&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;ONETOMANY&quot;</span><span class="p">,</span>
          <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="nt">&quot;returned&quot;</span><span class="p">:</span> <span class="mi">0</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sparse-fieldsets">
<h4>Sparse Fieldsets<a class="headerlink" href="#sparse-fieldsets" title="Permalink to this headline">¶</a></h4>
<p>We can ask only for certain fields (attributes and relationships are
collectively known as fields).</p>
<p>Use the <code class="docutils literal"><span class="pre">fields</span></code> parameter, parameterized by collection name
(fields[collection]), with the value set as a comma separated list of field
names.</p>
<p>So, to return only the title attribute and author relationship of each post:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts?fields<span class="o">[</span>posts<span class="o">]=</span>title,author
</pre></div>
</div>
<p>The resulting json has a <code class="docutils literal"><span class="pre">data</span></code> element with a list of objects something like
this:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: bob.second&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/6&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;people&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/6/author&quot;</span><span class="p">,</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/6/relationships/author&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
        <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sorting">
<h4>Sorting<a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h4>
<p>You can specify a sorting attribute and order with the sort query parameter.</p>
<p>Sort posts by title:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts?sort<span class="o">=</span>title
</pre></div>
</div>
<p>and in reverse:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts?sort<span class="o">=</span>-title
</pre></div>
</div>
<p>Sorting by multiple attributes (e.g. <code class="docutils literal"><span class="pre">sort=title,content</span></code>) and sorting by attributes of related objects (<cite>sort=author.name</cite>) are supported.</p>
<p>A sort on id is assumed unless the sort parameter is specified.</p>
</div>
<div class="section" id="pagination">
<h4>Pagination<a class="headerlink" href="#pagination" title="Permalink to this headline">¶</a></h4>
<p>You can specify the pagination limit and offset:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts?fields<span class="o">[</span>posts<span class="o">]=</span>title<span class="se">\&amp;</span>page<span class="o">[</span>limit<span class="o">]=</span><span class="m">2</span><span class="se">\&amp;</span>page<span class="o">[</span>offset<span class="o">]=</span><span class="m">2</span>
</pre></div>
</div>
<p>We asked for only the <code class="docutils literal"><span class="pre">title</span></code> field above so that the results would be more
compact…</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: alice.second&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/3&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: bob.main&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/4&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;first&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?page%5Blimit%5D=2&amp;sort=id&amp;page%5Boffset%5D=0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;last&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?page%5Blimit%5D=2&amp;sort=id&amp;page%5Boffset%5D=4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;next&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?page%5Blimit%5D=2&amp;sort=id&amp;page%5Boffset%5D=4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;prev&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?page%5Blimit%5D=2&amp;sort=id&amp;page%5Boffset%5D=0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?fields[posts]=title&amp;page[limit]=2&amp;page[offset]=2&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
      <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="nt">&quot;offset&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="nt">&quot;returned&quot;</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There’s a default page limit which is used if the limit is not specified and a
maximum limit that the server will allow. Both of these can be set in the ini
file.</p>
</div>
<div class="section" id="filtering">
<h4>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h4>
<p>The JSON API spec doesn’t say much about filtering syntax, other than that it
should use the parameter key <code class="docutils literal"><span class="pre">filter</span></code>. In this implementation, we use syntax
like the following:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="nb">filter</span><span class="p">[</span><span class="o">&lt;</span><span class="n">attribute_spec</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">operator</span><span class="o">&gt;</span><span class="p">]</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">attribute_spec</span></code> is either a direct attribute name or a dotted path to an
attribute via relationhips.</li>
<li><code class="docutils literal"><span class="pre">operator</span></code> is one of the list of supported operators (<a class="reference internal" href="#search-filter-operators">Search (Filter) Operators</a>).</li>
<li><code class="docutils literal"><span class="pre">value</span></code> is the value to match on.</li>
</ul>
<p>This is simple and reasonably effective. It’s a little awkward on readability though. If you feel that you have a syntax that is more readable, more powerful, easier to parse or has some other advantage, let me know - I’d be interested in any thoughts.</p>
<p>Search operators in sqlalchemy (called column comparators) must be registered before they are treated as valid for use in json-api filters. The procedure for registering them, and the list of those registered by default can be found in <a class="reference internal" href="#search-filter-operators">Search (Filter) Operators</a></p>
<div class="section" id="filter-examples">
<h5>Filter Examples<a class="headerlink" href="#filter-examples" title="Permalink to this headline">¶</a></h5>
<p>Find all the people with name ‘alice’:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>http GET http://localhost:6543/people?filter<span class="o">[</span>name:eq<span class="o">]=</span>alice
</pre></div>
</div>
<p>Find all the posts published after 2015-01-03:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>http GET http://localhost:6543/posts?filter<span class="o">[</span>published_at:gt<span class="o">]=</span><span class="m">2015</span>-01-03
</pre></div>
</div>
<p>Find all the posts with ‘bob’ somewhere in the title:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>http GET http://localhost:6543/posts?filter<span class="o">[</span>title:like<span class="o">]=</span>*bob*
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="apidoc/pyramid_jsonapi.html">pyramid_jsonapi package</a></li>
</ul>


  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyramid-jsonapi Documentation</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#auto-creating-an-api">Auto-Creating an API</a><ul>
<li><a class="reference internal" href="#pyramid-jsonapi-pyramidjsonapi"><code class="docutils literal"><span class="pre">pyramid_jsonapi.PyramidJSONAPI</span></code></a></li>
<li><a class="reference internal" href="#auto-create-assumptions">Auto-Create Assumptions</a></li>
<li><a class="reference internal" href="#trying-your-api-out">Trying Your API Out</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customising-the-generated-api">Customising the Generated API</a><ul>
<li><a class="reference internal" href="#selectively-passing-models-for-api-generation">Selectively Passing Models for API Generation</a></li>
<li><a class="reference internal" href="#modifying-endpoints">Modifying Endpoints</a></li>
<li><a class="reference internal" href="#search-filter-operators">Search (Filter) Operators</a></li>
<li><a class="reference internal" href="#callbacks">Callbacks</a></li>
<li><a class="reference internal" href="#getting-the-callback-deque">Getting the Callback Deque</a></li>
<li><a class="reference internal" href="#available-callback-deques">Available Callback Deques</a></li>
<li><a class="reference internal" href="#canned-callbacks">Canned Callbacks</a></li>
<li><a class="reference internal" href="#registering-canned-callbacks">Registering Canned Callbacks</a></li>
<li><a class="reference internal" href="#callback-sets">Callback Sets</a><ul>
<li><a class="reference internal" href="#access-control-serialised-objects"><code class="docutils literal"><span class="pre">access_control_serialised_objects</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#consuming-the-api-from-the-client-end">Consuming the API from the Client End</a><ul>
<li><a class="reference internal" href="#get-ing-resources">GET-ing Resources</a><ul>
<li><a class="reference internal" href="#a-collection">A Collection</a></li>
<li><a class="reference internal" href="#a-single-resource">A Single Resource</a></li>
<li><a class="reference internal" href="#sparse-fieldsets">Sparse Fieldsets</a></li>
<li><a class="reference internal" href="#sorting">Sorting</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
<li><a class="reference internal" href="#filtering">Filtering</a><ul>
<li><a class="reference internal" href="#filter-examples">Filter Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Colin Higgs.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>